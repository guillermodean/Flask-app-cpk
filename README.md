# Script CPK, CP calculation for Effort machine cobot.

Script de cálculo y graficado de CP y CPK para cobot de máquina de esfuerzos desplegado en servidor local con pm2.
Se implementa tambien una aplicación web desarrollada con flask para visualizar tanto la tabla como las graficas que genera el script.
En esta app tambien se implementa un boton para lanzar el script.

*Script CPK, CP calculation and plotting for Effort machine cobot deployed in local server with pm2.*
*A web application developed with flask is also implemented to view both the table and the graphs generated by the script.
In this app a button is also implemented to launch the script.*

## Informacion
---

Esta aplicación recoge de la BBDD mysql en la 10.73.83.220 la información extraida de la máquina de fuezas con OPC client y calcula los cpks
El front end se puede acceder a traves de la URL: http://10.73.83.220/7qbs/

El front end de las graficas también se puede acceder desde la app generada en este proyecto

*This application collects from the mysql DB on 10.73.83.220 the information extracted from the power machine with OPC client and calculates the cpks
The front end can be accessed through the URL: http://10.73.83.220/7qbs/*

*The front end of the graphs can also be accessed from the app generated in this project*

####Cp
The Cp index is calculated using specification limits and the standard deviation only. This index indicates, in general, whether the process is capable of producing products to specifications. No information on the ability of the process to adhere to the target value is included in this index.
The formula for Cp is as follows:

![alt text](https://github.com/guillermodean/Flask-app-cpk/blob/R-API-CPK/static/img/cp.jpg?raw=true)

####Cpk
This Cpk index is calculated using specification limits, the standard deviation, and the mean. The index indicates whether the process is capable of producing within specification and is also an indicator of the ability of the process to adhere to the target specification.
The formula for Cpk is as follows:

![alt text](https://github.com/guillermodean/Flask-app-cpk/blob/R-API-CPK/static/img/cpk.jpg?raw=true)


## Desarrollo
---

### Lenguajes:

* Python

### Desarrollada usando:

* PANDAS
* MATPLOTLIB
* mysql.connector
* Flask

### BBDD:

* MySQL - en el archivo config.json se definen las variables de la BBDD tanto para desarrollo como para producción
 
*in the config.json file the variables of the DB are defined for both development and production*

### Test de la API:

---
Todavía no se ha testeado

*No tests carried out yet*
### Despliegue:


* Desplegada en:  `http://10.73.83.220/7qbs/`
* PM2: `10.73.82.219`

Para lanzarlo hay que abrir una consola y primero ejecutar el comando de abajo:

*To launch it you have to open a console and first execute the command below*

`PM2 ls`

Asi vemos si hay algun servicio ejecutandose.

*So we see if there is any service running*

después lanzar:

*then launch:*

`PM2 start setup.py --name CPK --interpreter py`

`pm2 startup`

`pm2 save`

>####Despliegue con docker aun pendiente. 
> Problemas con la conexion a mysql
### Repositorios:

* Front end 
* Back end 

## Licencia
---
ISRI
## Organización
---
### Empresa ISRINGHAUSEN: 

ISRINGHAUSEN es una empresa con más de 50 años de experiencia en la fabricación de asientos para vehículos industriales. A día de hoy es suministrador de muchas de las principales marcas de automoción internacional.

*ISRINGHAUSEN is a company with more than 50 years of experience in the manufacture of seats for industrial vehicles. Today it is a supplier to many of the main international automotive brands.*